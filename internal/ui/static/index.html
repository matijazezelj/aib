<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIB â€” Assets in a Box</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
</head>
<body>
    <header>
        <h1>AIB</h1>
        <span class="subtitle">Assets in a Box</span>
        <div class="stats" id="stats"></div>
    </header>

    <div class="toolbar">
        <input type="text" id="search" placeholder="Search nodes... ( / )" />
        <select id="filter-type">
            <option value="">All Types</option>
        </select>
        <select id="filter-source">
            <option value="">All Sources</option>
        </select>
        <select id="group-by">
            <option value="">No Grouping</option>
            <option value="source">Group by Source</option>
            <option value="type">Group by Type</option>
            <option value="namespace">Group by Namespace</option>
        </select>
        <div class="dropdown" id="export-dropdown">
            <button id="btn-export">Export</button>
            <div class="dropdown-menu" id="export-menu">
                <a href="#" data-format="json">JSON</a>
                <a href="#" data-format="dot">DOT (Graphviz)</a>
                <a href="#" data-format="mermaid">Mermaid</a>
                <a href="#" data-format="png">PNG Image</a>
            </div>
        </div>
        <button id="btn-reset">Reset View</button>
        <button id="btn-scan">Scan Now</button>
        <span id="scan-status"></span>
        <button id="btn-legend">Legend</button>
        <button id="btn-shortcuts" title="Keyboard Shortcuts (?)">?</button>
    </div>

    <div id="legend" class="hidden">
        <span class="legend-item"><svg width="14" height="14"><rect x="1" y="1" width="12" height="12" rx="1" fill="#6e9ecf" stroke="#30363d"/></svg> Compute</span>
        <span class="legend-item"><svg width="14" height="14"><rect x="1" y="1" width="12" height="12" rx="4" fill="#5b9e8f" stroke="#30363d"/></svg> Container</span>
        <span class="legend-item"><svg width="14" height="14"><circle cx="7" cy="7" r="6" fill="#b8a965" stroke="#30363d"/></svg> Service</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="7,1 13,7 7,13 1,7" fill="#5589a6" stroke="#30363d"/></svg> Network</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="7,1 13,12 1,12" fill="#c08a5a" stroke="#30363d"/></svg> DNS/FW</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="7,1 13,7 7,13 1,7" fill="#8f7bb5" stroke="#30363d"/></svg> Data</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="4,1 10,1 13,5 13,9 10,13 4,13 1,9 1,5" fill="#b5706b" stroke="#30363d"/></svg> Security</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="7,1 13,5 11,12 3,12 1,5" fill="#9478a7" stroke="#30363d"/></svg> IAM</span>
        <span class="legend-item"><svg width="14" height="14"><polygon points="7,0 9,5 14,5 10,8 12,14 7,10 2,14 4,8 0,5 5,5" fill="#6aab8e" stroke="#30363d"/></svg> Monitor</span>
        <span class="legend-item"><svg width="14" height="14"><rect x="1" y="2" width="12" height="10" rx="5" fill="#7c8894" stroke="#30363d"/></svg> Namespace</span>
    </div>

    <div id="shortcuts-panel" class="hidden">
        <div class="shortcuts-list">
            <span><kbd>/</kbd> Focus search</span>
            <span><kbd>Esc</kbd> Deselect / close panel</span>
            <span><kbd>r</kbd> Reset view</span>
            <span><kbd>l</kbd> Toggle legend</span>
            <span><kbd>?</kbd> Toggle shortcuts</span>
        </div>
    </div>

    <div class="main">
        <div id="cy"></div>
        <div id="detail-panel" class="hidden">
            <button id="close-panel">&times;</button>
            <h3 id="detail-name"></h3>
            <div id="detail-content"></div>
            <h4>Blast Radius</h4>
            <div id="impact-content"></div>
        </div>
    </div>

    <div id="context-menu" class="hidden">
        <a href="#" data-action="impact">Show Impact</a>
        <a href="#" data-action="neighbors">Show Neighbors</a>
        <a href="#" data-action="copy-id">Copy ID</a>
    </div>

    <script src="/app.js"></script>
</body>
</html>
